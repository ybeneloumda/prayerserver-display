
/* CSS variables for easy customization */
:root {
  --background-color: #0a0a0f;
  --card-bg: linear-gradient(160deg, #1a1a2e, #16213e);
  --card-border: #2d3748;
  --accent-color: #00d4ff;
  --accent-secondary: #ff6b9d;
  --accent-tertiary: #4ecdc4;
  --text-color: #f7fafc;
  --muted-color: #a0aec0;
  --next-border-width: 3px;
  --font-family: 'Segoe UI', Tahoma, sans-serif;
  --gap: 0.75rem;
  --card-height: 6rem;
  --card-max-width: 16rem;
  --header-padding: 1rem;
  --footer-height: 3rem;
  /* Default logo height in rem; can be overridden via settings */
  --logo-height: 3rem;

  /* Typography variables: these can be overridden via settings */
  --clock-size: 2rem;
  --next-event-size: 1.5rem;
  --slideshow-size: 2.5rem;
  --card-name-scale: 0.25;
  --card-time-scale: 0.30;
  --card-iqamah-scale: 0.18;
  /* Default margins for the slideshow (vertical spacing between cards and footer) */
  --slideshow-margin-top: 0.5rem;
  --slideshow-margin-bottom: 0.5rem;
  /* Weather display styles */
  --weather-font-size: 0.9rem;
  --weather-icon-size: 1.2rem;
  --weather-stale-color: #ffcc00;
  --weather-normal-color: var(--muted-color);
  
  /* Enhanced weather features */
  --weather-forecast-size: 0.8rem;
  --weather-alert-color: #ff6b6b;
  --weather-air-quality-good: #4caf50;
  --weather-air-quality-moderate: #ff9800;
  --weather-air-quality-poor: #f44336;
  --weather-forecast-bg: rgba(0, 0, 0, 0.1);
  --weather-forecast-border: rgba(255, 255, 255, 0.1);
  
  /* New UX/UI variables */
  --transition-duration: 0.3s;
  --transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
  --loading-opacity: 0.6;
  --hover-scale: 1.02;
  --focus-outline: 2px solid var(--accent-color);
  --focus-outline-offset: 2px;
  --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-medium: 0 4px 16px rgba(0, 0, 0, 0.2);
  --shadow-heavy: 0 8px 32px rgba(0, 0, 0, 0.3);
  --shadow-card: 0 4px 12px rgba(0, 0, 0, 0.15);
  --shadow-card-hover: 0 8px 24px rgba(0, 0, 0, 0.25);
  --border-radius: 0.5rem;
  --border-radius-large: 1rem;
  --border-radius-card: 0.75rem;
  --gradient-card: linear-gradient(145deg, rgba(0, 212, 255, 0.1), rgba(255, 107, 157, 0.05));
  --gradient-card-hover: linear-gradient(145deg, rgba(0, 212, 255, 0.15), rgba(255, 107, 157, 0.08));
  --gradient-header: linear-gradient(135deg, rgba(80, 80, 120, 0.9), rgba(100, 120, 160, 0.9));
  --gradient-footer: linear-gradient(135deg, rgba(26, 26, 46, 0.8), rgba(22, 33, 62, 0.8));
  
  /* Theme support */
  --theme-transition: all var(--transition-duration) var(--transition-timing);
}

/* Light theme variables */
[data-theme="light"] {
  --background-color: #f5f5f5;
  --card-bg: linear-gradient(160deg, #ffffff, #f8f9fa);
  --card-border: #e0e0e0;
  --accent-color: #1976d2;
  --text-color: #333333;
  --muted-color: #666666;
  --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-medium: 0 4px 16px rgba(0, 0, 0, 0.15);
  --shadow-heavy: 0 8px 32px rgba(0, 0, 0, 0.2);
  --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.08);
  --shadow-card-hover: 0 4px 16px rgba(0, 0, 0, 0.12);
  --gradient-card: linear-gradient(145deg, #ffffff, #f8f9fa);
  --gradient-card-hover: linear-gradient(145deg, #ffffff, #f0f2f5);
  --gradient-header: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.95));
}

/* High contrast mode */
[data-theme="high-contrast"] {
  --background-color: #000000;
  --card-bg: #ffffff;
  --card-border: #ffffff;
  --accent-color: #ffff00;
  --text-color: #ffffff;
  --muted-color: #cccccc;
  --next-border-width: 4px;
}

/* Accessibility improvements */
* {
  box-sizing: border-box;
}

/* Focus styles for better accessibility */
button:focus,
input:focus,
select:focus,
textarea:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

/* Skip to content link for screen readers */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--accent-color);
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: var(--border-radius);
  z-index: 1000;
  transition: var(--theme-transition);
}

.skip-link:focus {
  top: 6px;
}

/* Loading states */
.loading {
  opacity: var(--loading-opacity);
  pointer-events: none;
  transition: var(--theme-transition);
}

.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid var(--accent-color);
  border-top: 2px solid transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Smooth transitions for all interactive elements */
.prayer-card,
#admin-btn,
button,
input,
select,
textarea {
  transition: var(--theme-transition);
}

/* Enhanced hover effects */
.prayer-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-medium);
}

#admin-btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-light);
}

/* Settings toggle button */
#settings-toggle {
  position: fixed;
  bottom: 4rem;
  left: 1rem;
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 50%;
  width: 48px;
  height: 48px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  z-index: 1000;
  transition: var(--theme-transition);
  box-shadow: var(--shadow-light);
}

#settings-toggle:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-medium);
}

#settings-toggle:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

/* Settings controls container */
#settings-controls {
  position: fixed;
  bottom: 4rem;
  left: 5rem;
  display: none;
  gap: 0.5rem;
  z-index: 1000;
  transition: var(--theme-transition);
  align-items: center;
  background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.9));
  backdrop-filter: blur(15px);
  border-radius: var(--border-radius-large);
  padding: 0.5rem;
  border: 1px solid rgba(0, 212, 255, 0.2);
  box-shadow: 0 4px 20px rgba(0, 212, 255, 0.1);
}

/* Theme toggle button */
#theme-toggle {
  background: linear-gradient(145deg, rgba(0, 212, 255, 0.15), rgba(255, 107, 157, 0.1));
  border: 1px solid rgba(0, 212, 255, 0.3);
  border-radius: 50%;
  width: 48px;
  height: 48px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  transition: var(--theme-transition);
  box-shadow: 0 2px 10px rgba(0, 212, 255, 0.2);
  backdrop-filter: blur(5px);
}

#theme-toggle:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-medium);
}

#theme-toggle:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

/* Font size controls */
#font-controls {
  background: linear-gradient(145deg, rgba(0, 212, 255, 0.1), rgba(255, 107, 157, 0.05));
  border: 1px solid rgba(0, 212, 255, 0.2);
  border-radius: var(--border-radius);
  padding: 0.5rem;
  gap: 0.5rem;
  box-shadow: 0 2px 10px rgba(0, 212, 255, 0.15);
  transition: var(--theme-transition);
  backdrop-filter: blur(5px);
}

#font-controls button {
  background: var(--accent-color);
  border: none;
  border-radius: var(--border-radius);
  color: white;
  width: 32px;
  height: 32px;
  cursor: pointer;
  font-size: 1rem;
  transition: var(--theme-transition);
}

#font-controls button:hover {
  transform: scale(1.1);
}

#font-controls button:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

/* Share button within settings controls */
#settings-controls #share-btn {
  background: linear-gradient(145deg, rgba(78, 205, 196, 0.15), rgba(255, 107, 157, 0.1));
  border: 1px solid rgba(78, 205, 196, 0.3);
  border-radius: 50%;
  width: 48px;
  height: 48px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  transition: var(--theme-transition);
  box-shadow: 0 2px 10px rgba(78, 205, 196, 0.2);
  backdrop-filter: blur(5px);
}

#settings-controls #share-btn:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-medium);
}

#settings-controls #share-btn:focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-outline-offset);
}

/* Progress indicator for prayer time countdown */
.progress-ring {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: var(--border-radius);
  overflow: hidden;
}

.progress-ring::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
  opacity: 0.3;
  animation: progress-pulse 2s ease-in-out infinite;
}

/* Only show progress animation on the next prayer card */
.prayer-card:not(.next) .progress-ring::before {
  animation: none;
  opacity: 0.1;
}

@keyframes progress-pulse {
  0%, 100% { opacity: 0.1; }
  50% { opacity: 0.4; }
}

/* Enhanced card animations */
.prayer-card {
  position: relative;
  overflow: hidden;
}

.prayer-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.5s ease-in-out;
}

.prayer-card:hover::before {
  left: 100%;
}

/* Improved admin panel styling */
#admin-panel {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.admin-row {
  transition: var(--theme-transition);
}

.admin-row:hover {
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--border-radius);
  padding: 0.5rem;
  margin: -0.5rem;
}

/* Enhanced form controls */
input, select, textarea {
  border-radius: var(--border-radius);
  border: 1px solid var(--card-border);
  background: var(--card-bg);
  color: var(--text-color);
  transition: var(--theme-transition);
}

input:focus, select:focus, textarea:focus {
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(0, 188, 212, 0.2);
}

/* ARIA labels and screen reader support */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Disable animations when no-animations class is present */
.no-animations * {
  animation: none !important;
  transition: none !important;
}

/* Disable hover effects when no-hover-effects class is present */
.no-hover-effects .prayer-card:hover,
.no-hover-effects #admin-btn:hover,
.no-hover-effects #theme-toggle:hover,
.no-hover-effects #font-controls button:hover,
.no-hover-effects #slideshow:hover {
  transform: none !important;
  box-shadow: none !important;
}

.no-hover-effects .prayer-card::before {
  display: none !important;
}

/* Disable loading states when no-loading-states class is present */
.no-loading-states .loading::after {
  display: none !important;
}

/* Hide accessibility elements when no-accessibility class is present */
.no-accessibility .skip-link {
  display: none !important;
}

/* Hide progress indicators when no-progress-indicator class is present */
.no-progress-indicator .progress-ring {
  display: none !important;
}

body {
  margin: 0;
  padding: 0;
  background-color: var(--background-color);
  color: var(--text-color);
  font-family: var(--font-family);
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

.app-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  position: relative;
  min-height: 0; /* Allow container to shrink */
  overflow: hidden; /* Prevent horizontal overflow */
}

header {
  display: flex;
  /* Space the left group, logo and right group evenly across the header */
  justify-content: space-between;
  /* Center items vertically so the logo sits midway between the name and clock */
  align-items: center;
  padding: var(--header-padding);
  position: relative;
  z-index: 2;
  background: var(--gradient-header);
  backdrop-filter: blur(5px);
  border-bottom: 2px solid rgba(0, 212, 255, 0.4);
  box-shadow: 0 4px 20px rgba(0, 212, 255, 0.2);
}

.header-left {
  display: flex;
  flex-direction: column;
  max-width: 60%;
}

#mosque-name {
  font-size: 1.8rem;
  font-weight: bold;
  line-height: 1.2;
  background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

#date-line {
  font-size: 1rem;
  color: var(--muted-color);
}

.header-right {
  text-align: right;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

/* Weather display container in the header. When stale, it uses the
   --weather-stale-color. Otherwise it uses --weather-normal-color. */
#weather-display {
  margin-top: 0.25rem;
  display: flex;
  align-items: center;
  font-size: var(--weather-font-size);
  color: var(--weather-normal-color);
  gap: 0.25rem;
  flex-wrap: wrap;
  max-width: 100%;
}

#weather-display.stale {
  color: var(--weather-stale-color);
}

#weather-display img {
  height: var(--weather-icon-size);
  width: auto;
  display: inline-block;
}

/* Emoji icon for weather conditions (auto-detected). Sized similarly to the
   weather icon. */
#weather-display .weather-emoji {
  font-size: var(--weather-icon-size);
  line-height: var(--weather-icon-size);
  display: inline-block;
}

/* Enhanced weather features */
.weather-forecast {
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
  padding: 0.5rem;
  background: linear-gradient(145deg, rgba(0, 212, 255, 0.1), rgba(255, 107, 157, 0.05));
  border: 1px solid rgba(0, 212, 255, 0.2);
  border-radius: var(--border-radius);
  font-size: var(--weather-forecast-size);
  flex-wrap: wrap;
  backdrop-filter: blur(5px);
}

.weather-forecast-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  min-width: 3rem;
}

.weather-alert {
  color: var(--weather-alert-color);
  font-weight: bold;
  animation: pulse 2s infinite;
  text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
}

.weather-air-quality {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.5rem;
  border-radius: var(--border-radius);
  font-size: 0.8rem;
  backdrop-filter: blur(5px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.weather-air-quality.good {
  background: var(--weather-air-quality-good);
  color: white;
}

.weather-air-quality.moderate {
  background: var(--weather-air-quality-moderate);
  color: white;
}

.weather-air-quality.poor {
  background: var(--weather-air-quality-poor);
  color: white;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Prayer Time Enhancements */
.qibla-indicator {
  position: fixed;
  bottom: 7rem;
  left: 1rem;
  background: linear-gradient(145deg, rgba(255, 107, 157, 0.15), rgba(0, 212, 255, 0.1));
  border: 1px solid rgba(255, 107, 157, 0.3);
  border-radius: 50%;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  z-index: 1000;
  transition: var(--theme-transition);
  box-shadow: 0 2px 15px rgba(255, 107, 157, 0.2);
  backdrop-filter: blur(5px);
}

.qibla-indicator:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-medium);
}

.qibla-arrow {
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 20px solid var(--accent-secondary);
  transition: transform 0.3s ease;
  filter: drop-shadow(0 2px 4px rgba(255, 107, 157, 0.3));
}

.prayer-notification {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(145deg, rgba(26, 26, 46, 0.95), rgba(22, 33, 62, 0.95));
  border: 2px solid var(--accent-color);
  border-radius: var(--border-radius);
  padding: 1rem;
  z-index: 2000;
  box-shadow: 0 8px 32px rgba(0, 212, 255, 0.3);
  text-align: center;
  animation: notification-pulse 2s infinite;
  backdrop-filter: blur(15px);
}

@keyframes notification-pulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.05); }
}

/* Admin toggle button in the header */
#admin-btn {
  margin-top: 0.25rem;
  background: none;
  border: 1px solid var(--card-border);
  border-radius: 0.25rem;
  color: var(--muted-color);
  padding: 0.25rem 0.5rem;
  cursor: pointer;
  font-size: 0.8rem;
}
#admin-btn:hover {
  color: var(--accent-color);
  border-color: var(--accent-color);
}

#digital-clock {
  font-size: var(--clock-size);
  font-weight: bold;
  letter-spacing: 0.05em;
  font-variant-numeric: tabular-nums;
  /* Force left-to-right direction for the digital clock to prevent bidi
     reordering of the time string in RTL languages */
  direction: ltr;
  unicode-bidi: embed;
  margin-left: 0.5rem;
}

#location-label {
  font-size: 0.9rem;
  color: var(--muted-color);
}

.logo {
  /* Use CSS variable for logo height so it can be customised in settings. Width
     auto preserves aspect ratio. */
  height: var(--logo-height);
  width: auto;
  margin-right: 0.5rem;
}

#cards-container {
  flex: 1;
  display: grid;
  grid-auto-rows: var(--card-height);
  grid-template-columns: repeat(auto-fit, minmax(min(var(--card-max-width), 100%), 1fr));
  gap: calc(var(--gap) * 1.2);
  align-content: start;
  padding: calc(var(--gap) * 1.5);
  overflow-y: auto;
  box-sizing: border-box;
  position: relative;
}

.prayer-card {
  background: var(--gradient-card);
  border: 1px solid var(--card-border);
  border-radius: var(--border-radius-card);
  padding: 0.75rem 1rem;
  position: relative;
  display: flex;
  flex-direction: column;
  /* Center content within cards so the text fills the available space when cards are extended */
  justify-content: center;
  /* Align items centrally horizontally but allow the iqamah line to flow separately */
  align-items: center;
  transition: all var(--transition-duration) var(--transition-timing);
  box-shadow: var(--shadow-card);
  backdrop-filter: blur(5px);
  overflow: hidden;
}

.prayer-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, transparent, rgba(0, 212, 255, 0.1), transparent);
  opacity: 0;
  transition: opacity var(--transition-duration) var(--transition-timing);
  pointer-events: none;
}

.prayer-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-card-hover);
  background: var(--gradient-card-hover);
}

.prayer-card:hover::before {
  opacity: 1;
}

.prayer-card.next {
  border-color: var(--accent-color);
  box-shadow: 0 0 25px var(--accent-color), 0 0 50px rgba(255, 107, 157, 0.3);
  animation: next-glow 2s ease-in-out infinite alternate;
  background: linear-gradient(145deg, rgba(0, 212, 255, 0.15), rgba(255, 107, 157, 0.08));
}

.prayer-card.next::after {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, var(--accent-color), var(--accent-secondary), var(--accent-tertiary));
  border-radius: var(--border-radius-card);
  z-index: -1;
  opacity: 0.4;
  animation: border-glow 3s ease-in-out infinite;
}

@keyframes next-glow {
  0% {
    box-shadow: 0 0 25px var(--accent-color), 0 0 50px rgba(255, 107, 157, 0.3);
  }
  100% {
    box-shadow: 0 0 35px var(--accent-color), 0 0 70px rgba(255, 107, 157, 0.5);
  }
}

@keyframes border-glow {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.6;
  }
}

.prayer-name {
  /* Scale name font size relative to card height but clamp to sensible range.
     Increase the scaling factor so the name occupies more vertical space as
     cards get taller. */
  font-size: clamp(1.2rem, calc(var(--card-height) * var(--card-name-scale)), 3.5rem);
  font-weight: bold;
  margin-bottom: 0.3rem;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  letter-spacing: 0.02em;
}

.prayer-time {
  /* Scale time font size relative to card height but clamp to sensible range.
     Increase the scaling factor to let the time fill more of the card when
     available height is large. */
  font-size: clamp(1.6rem, calc(var(--card-height) * var(--card-time-scale)), 5rem);
  font-variant-numeric: tabular-nums;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  /* Force left-to-right display of numeric time even in RTL layouts to
     prevent bidi reordering or unintended line breaks. */
  direction: ltr;
  unicode-bidi: embed;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  font-weight: 600;
  letter-spacing: 0.05em;
}

.prayer-iqamah {
  /* Scale iqamah font size relative to card height but clamp to a smaller range.
     Increase scaling to ensure the optional iqamah text remains proportional
     when cards are extended. */
  font-size: clamp(0.9rem, calc(var(--card-height) * var(--card-iqamah-scale)), 2rem);
  color: var(--muted-color);
  /* Only apply top margin when there's actual iqamah text; otherwise this element
     will be hidden via the :empty selector below to prevent unnecessary blank
     space at the bottom of the card. */
  margin-top: 0.25rem;
  text-align: center;
  /* Force left-to-right direction for numeric parts to avoid issues in RTL. */
  direction: ltr;
  unicode-bidi: embed;
}

/* When the iqamah text is empty, hide the element and remove its margin. This
   prevents blank vertical space on cards without a set iqamah time. */
.prayer-iqamah:empty {
  display: none;
  margin-top: 0;
}

footer {
  height: var(--footer-height);
  padding: 0 1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-top: 1px solid rgba(0, 212, 255, 0.2);
  background: var(--gradient-footer);
  backdrop-filter: blur(15px);
  position: relative;
  z-index: 2;
  box-shadow: 0 -4px 30px rgba(0, 212, 255, 0.1);
}

#next-event {
  /* Make the next event text more prominent */
  font-size: var(--next-event-size);
  font-weight: bold;
  color: var(--accent-color);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: text-pulse 2s ease-in-out infinite;
}

@keyframes text-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}

#ticker {
  /* Layout and positioning */
  flex: 1;
  margin-right: 2rem;
  position: relative;
  display: flex;
  align-items: center;
  
  /* Overflow and text handling */
  overflow: hidden;
  white-space: nowrap;
  width: 100%;
}

/* Each individual segment of the ticker. Two copies will be appended in JS to
   create a seamless loop. Extra right padding adds a gap between repetitions. */
.ticker-slide {
  display: inline-block;
  padding-right: 2rem;
  color: var(--text-color);
  font-size: var(--ticker-size);
  line-height: 1.2;
}

/* Wrapper around the duplicated ticker slides.  It retains an auto width so
   that JavaScript can measure its full size.  We keep it as inline-flex to
   line up the slides horizontally and prevent wrapping. */
.ticker-inner {
  display: inline-flex;
  white-space: nowrap;
  align-items: center;
}

/* Animation for left‑to‑right languages (English, Spanish). Moves both copies
   leftwards by half of their combined width so that the second copy
   seamlessly follows the first. */
@keyframes ticker-move-ltr {
  0%   { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* Animation for right‑to‑left languages (Arabic). Moves both copies
   rightwards by half of their combined width to achieve continuous scroll. */
@keyframes ticker-move-rtl {
  0%   { transform: translateX(0); }
  100% { transform: translateX(50%); }
}

/* Slideshow of phrases that appears prominently in the middle of the page. It uses
   a simple fade effect when cycling phrases. */
#slideshow {
  /* Let the height grow automatically based on the text length while retaining a minimum height
     that scales with the configured slideshow font size. This prevents long verses from
     overflowing and allows multi‑line content. */
  min-height: calc(var(--slideshow-size) * 3);
  height: auto;
  font-size: var(--slideshow-size);
  color: var(--text-color);
  display: flex;
  /* The vertical alignment of the text within the slideshow can be configured via
     JavaScript by changing the alignItems property on this element. It defaults to
     center but will be overwritten based on user preference. */
  align-items: center;
  justify-content: center;
  text-align: center;
  /* Position prominently in the middle of the page with generous spacing */
  margin: 2rem auto;
  padding: 2rem;
  width: 95%;
  max-width: 1200px;
  min-width: 300px;
  opacity: 1;
  transition: all var(--transition-duration) var(--transition-timing);
  white-space: pre-line;
  word-wrap: break-word;
  overflow-wrap: break-word;
  /* Enhanced visibility for better readability from far */
  background: linear-gradient(145deg, rgba(0, 212, 255, 0.1), rgba(255, 107, 157, 0.05));
  border-radius: var(--border-radius-large);
  border: 1px solid rgba(0, 212, 255, 0.2);
  box-shadow: var(--shadow-heavy);
  backdrop-filter: blur(10px);
  /* Enhanced typography for better readability */
  font-weight: 500;
  line-height: 1.4;
  letter-spacing: 0.02em;
  /* Subtle pulse animation to draw attention */
  animation: slideshow-pulse 3s ease-in-out infinite;
  position: relative;
  overflow: hidden;
}

#slideshow::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, transparent, rgba(0, 212, 255, 0.1), transparent);
  opacity: 0;
  transition: opacity var(--transition-duration) var(--transition-timing);
  pointer-events: none;
}

#slideshow:hover::before {
  opacity: 1;
}

/* Hover effect for slideshow to make it even more prominent */
#slideshow:hover {
  background: linear-gradient(145deg, rgba(0, 212, 255, 0.15), rgba(255, 107, 157, 0.08));
  border-color: rgba(0, 212, 255, 0.3);
  box-shadow: 0 8px 40px rgba(0, 212, 255, 0.2);
  transform: translateY(-3px);
  transition: all var(--transition-duration) var(--transition-timing);
}

/* Responsive design for slideshow on smaller screens */
@media (max-width: 768px) {
  #slideshow {
    width: 98%;
    max-width: none;
    margin: 1rem auto;
    padding: 1.5rem;
    font-size: calc(var(--slideshow-size) * 0.8);
  }
}

/* Responsive design for slideshow on very small screens */
@media (max-width: 480px) {
  #slideshow {
    width: 99%;
    margin: 0.5rem auto;
    padding: 1rem;
    font-size: calc(var(--slideshow-size) * 0.7);
    min-height: calc(var(--slideshow-size) * 2);
  }
}

/* Subtle pulse animation for slideshow to draw attention */
@keyframes slideshow-pulse {
  0%, 100% {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }
  50% {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.1);
  }
}

/* Legacy ticker animations - these are no longer used as we now use dynamic keyframes */

/* Admin panel styles */
#admin-panel {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  color: #fff;
  display: none;
  flex-direction: column;
  z-index: 100;
  /* Force LTR direction for admin panel regardless of main language */
  direction: ltr !important;
  text-align: left !important;
}

#admin-panel.active {
  display: flex;
}

#admin-form {
  background: #1e1e1e;
  border-radius: 0.5rem;
  padding: 1rem;
  margin: auto;
  max-height: 90vh;
  width: 90vw;
  overflow-y: auto;
  box-sizing: border-box;
  /* Force LTR direction for admin form */
  direction: ltr !important;
  text-align: left !important;
}

#admin-form h2 {
  margin-top: 0;
}

/* Section headings within the admin form. These <h3> elements are used to
   group related settings in the panel. They use the accent colour and a
   bottom border to separate sections visually. */
#admin-form h3 {
  margin-top: 1rem;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  color: var(--accent-color);
  border-bottom: 1px solid var(--card-border);
  padding-bottom: 0.25rem;
}

.admin-row {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: 0.5rem;
}

.admin-row label {
  flex: 1 1 200px;
  display: flex;
  flex-direction: column;
  font-size: 0.9rem;
}

.admin-row input[type="text"],
.admin-row input[type="number"],
.admin-row input[type="file"],
.admin-row select,
.admin-row textarea {
  padding: 0.4rem;
  margin-top: 0.25rem;
  font-size: 1rem;
  background: #2b2b2b;
  color: #fff;
  border: 1px solid #555;
  border-radius: 0.25rem;
}

.admin-row textarea {
  resize: vertical;
  height: 3rem;
}

.admin-buttons {
  margin-top: 1rem;
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
}

.admin-buttons button {
  padding: 0.5rem 1rem;
  font-size: 1rem;
  border: none;
  border-radius: 0.25rem;
  cursor: pointer;
}

button.save {
  background: var(--accent-color);
  color: #000;
}

button.cancel {
  background: #555;
  color: #fff;
}

button.reset {
  background: #b71c1c;
  color: #fff;
}

/* Flash effect for pre-iqamah alert */
@keyframes flash-border {
  0%, 100% { border-color: var(--accent-color); }
  50% { border-color: #ff5252; }
}

.prayer-card.flash {
  animation: flash-border 1s linear infinite;
}

/* Background image */
#background-image {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-size: cover;
  background-position: center;
  opacity: 0.2;
  z-index: 0;
}

body.rtl {
  direction: rtl;
}

body.rtl header {
  flex-direction: row-reverse;
}

body.rtl .header-left {
  text-align: right;
}

body.rtl #digital-clock {
  text-align: left;
}

body.rtl footer #next-event {
  margin-right: 0;
  margin-left: 1rem;
}

/* ---------------------------------------------------------------------------
   Schedule view styles
   The schedule view is used for weekly and monthly prayer schedules. It displays
   a scrollable table beneath the header and replaces the card grid when
   `viewMode` is set to 'week' or 'month'.
--------------------------------------------------------------------------- */
.schedule-container {
  flex: 1;
  overflow-y: auto;
  padding: var(--gap);
  display: none; /* hidden by default; shown in week/month views */
}
.schedule-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  color: var(--text-color);
}
.schedule-table th,
.schedule-table td {
  border: 1px solid var(--card-border);
  padding: 0.3rem;
  text-align: center;
  font-size: 0.9rem;
  white-space: nowrap;
}
.schedule-table th {
  background: #1c1c1c;
  color: var(--accent-color);
  position: sticky;
  top: 0;
  z-index: 1;
}
.schedule-table tbody tr:nth-child(odd) {
  background: #171717;
}
.schedule-table tbody tr:nth-child(even) {
  background: #1e1e1e;
}